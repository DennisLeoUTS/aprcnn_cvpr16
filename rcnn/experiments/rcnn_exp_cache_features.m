function rcnn_exp_cache_features(chunk, part)
% chunk: train, test
% part: bbox, head, body
conf = rcnn_config;

% -------------------- CONFIG --------------------
net_file     = sprintf(conf.dir.CAFFE_NET_FILE, part);
cache_name   = sprintf(conf.dir.RCNN_FEATURE_PATH, part);
crop_mode    = 'warp';
crop_padding = 16;
% ------------------------------------------------



switch chunk
    case 'train'
        imdb_train = imdb_from_voc('train');
        rcnn_cache_pool5_features(imdb_train, ...
            'crop_mode', crop_mode, ...
            'crop_padding', crop_padding, ...
            'net_file', net_file, ...
            'cache_name', cache_name);
    case 'test'
        imdb_test  = imdb_from_voc('test');
        end_at = length(imdb_test.image_ids);
        rcnn_cache_pool5_features(imdb_test, ...
            'start', 1, 'end', end_at, ...
            'crop_mode', crop_mode, ...
            'crop_padding', crop_padding, ...
            'net_file', net_file, ...
            'cache_name', cache_name);
    case 'weak'
        imdb_weak  = imdb_from_voc('weak');
        rcnn_cache_pool5_features_for_weak(imdb_weak, ...
            'crop_mode', crop_mode, ...
            'crop_padding', crop_padding, ...
            'net_file', net_file, ...
            'cache_name', cache_name);
end


